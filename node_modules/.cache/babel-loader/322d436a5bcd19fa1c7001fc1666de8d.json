{"ast":null,"code":"import _toConsumableArray from\"/home/kenstate/Desktop/CarDocs-2/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{BASKET_ADD,BASKET_REMOVE_ITEM,BASKET_EDIT_ITEM}from\"../actions/types\";export default function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case BASKET_ADD:var _action$payload=action.payload,product=_action$payload.product,quantity=_action$payload.quantity;var exist=false;var currentQuentity=0;state.forEach(function(e){if(e.product._id===product._id){currentQuentity=e.quantity;exist=true;}});if(exist){state=state.filter(function(e){return e.product._id!==product._id;});currentQuentity+=quantity;return[{product:product,quantity:currentQuentity}].concat(_toConsumableArray(state));}else{return[{product:product,quantity:quantity}].concat(_toConsumableArray(state));}case BASKET_REMOVE_ITEM:state=state.filter(function(item){return item.product._id!==action.payload;});return state;case BASKET_EDIT_ITEM:var newstate=[];var _action$payload2=action.payload,product=_action$payload2.product,quantity=_action$payload2.quantity;console.log(state);state.map(function(item){if(item.product._id!==action.payload.product._id)newstate.push(item);else newstate.push({product:product,quantity:quantity});});state=newstate;return newstate;default:return state;}}","map":{"version":3,"sources":["/home/kenstate/Desktop/CarDocs-2/client/src/reducers/basketReducer.js"],"names":["BASKET_ADD","BASKET_REMOVE_ITEM","BASKET_EDIT_ITEM","state","action","type","payload","product","quantity","exist","currentQuentity","forEach","e","_id","filter","item","newstate","console","log","map","push"],"mappings":"sKAAA,OACEA,UADF,CAEEC,kBAFF,CAGEC,gBAHF,KAIO,kBAJP,CAMA,cAAe,WAA6B,IAApBC,CAAAA,KAAoB,2DAAZ,EAAY,IAARC,CAAAA,MAAQ,2CAC1C,OAAQA,MAAM,CAACC,IAAf,EACE,IAAKL,CAAAA,UAAL,qBAC2BI,MAAM,CAACE,OADlC,CACOC,OADP,iBACOA,OADP,CACeC,QADf,iBACeA,QADf,CAEE,GAAIC,CAAAA,KAAK,CAAG,KAAZ,CACA,GAAIC,CAAAA,eAAe,CAAG,CAAtB,CAGAP,KAAK,CAACQ,OAAN,CAAc,SAAAC,CAAC,CAAI,CACjB,GAAIA,CAAC,CAACL,OAAF,CAAUM,GAAV,GAAkBN,OAAO,CAACM,GAA9B,CAAmC,CACjCH,eAAe,CAAGE,CAAC,CAACJ,QAApB,CACAC,KAAK,CAAG,IAAR,CACD,CACF,CALD,EAMA,GAAIA,KAAJ,CAAW,CACTN,KAAK,CAAGA,KAAK,CAACW,MAAN,CAAa,SAASF,CAAT,CAAY,CAC/B,MAAOA,CAAAA,CAAC,CAACL,OAAF,CAAUM,GAAV,GAAkBN,OAAO,CAACM,GAAjC,CACD,CAFO,CAAR,CAGAH,eAAe,EAAIF,QAAnB,CACA,OAAQ,CAAED,OAAO,CAAPA,OAAF,CAAWC,QAAQ,CAAEE,eAArB,CAAR,4BAAmDP,KAAnD,GACD,CAND,IAMO,CACL,OAAQ,CAAEI,OAAO,CAAPA,OAAF,CAAWC,QAAQ,CAARA,QAAX,CAAR,4BAAkCL,KAAlC,GACD,CACH,IAAKF,CAAAA,kBAAL,CACEE,KAAK,CAAGA,KAAK,CAACW,MAAN,CAAa,SAASC,IAAT,CAAe,CAClC,MAAOA,CAAAA,IAAI,CAACR,OAAL,CAAaM,GAAb,GAAqBT,MAAM,CAACE,OAAnC,CACD,CAFO,CAAR,CAGA,MAAOH,CAAAA,KAAP,CAIF,IAAKD,CAAAA,gBAAL,CACE,GAAIc,CAAAA,QAAQ,CAAG,EAAf,CADF,qBAE2BZ,MAAM,CAACE,OAFlC,CAEOC,OAFP,kBAEOA,OAFP,CAEeC,QAFf,kBAEeA,QAFf,CAGES,OAAO,CAACC,GAAR,CAAYf,KAAZ,EACAA,KAAK,CAACgB,GAAN,CAAU,SAASJ,IAAT,CAAe,CACvB,GAAGA,IAAI,CAACR,OAAL,CAAaM,GAAb,GAAqBT,MAAM,CAACE,OAAP,CAAeC,OAAf,CAAuBM,GAA/C,CACEG,QAAQ,CAACI,IAAT,CAAcL,IAAd,EADF,IAEKC,CAAAA,QAAQ,CAACI,IAAT,CAAc,CAACb,OAAO,CAAPA,OAAD,CAASC,QAAQ,CAARA,QAAT,CAAd,CAAD,CACL,CAJD,EAMAL,KAAK,CAACa,QAAN,CACA,MAAOA,CAAAA,QAAP,CAEF,QACE,MAAOb,CAAAA,KAAP,CA5CJ,CA8CD","sourcesContent":["import {\n  BASKET_ADD,\n  BASKET_REMOVE_ITEM,\n  BASKET_EDIT_ITEM\n} from \"../actions/types\";\n\nexport default function(state = [], action) {\n  switch (action.type) {\n    case BASKET_ADD:\n      var {product,quantity} = action.payload;    \n      var exist = false;\n      var currentQuentity = 0;\n      \n\n      state.forEach(e => {\n        if (e.product._id === product._id) {\n          currentQuentity = e.quantity;\n          exist = true;\n        }\n      });\n      if (exist) {\n        state = state.filter(function(e) {\n          return e.product._id !== product._id;\n        });\n        currentQuentity += quantity;\n        return [{ product, quantity: currentQuentity }, ...state];\n      } else {\n        return [{ product, quantity }, ...state];\n      }\n    case BASKET_REMOVE_ITEM:\n      state = state.filter(function(item) {\n        return item.product._id !== action.payload;\n      });\n      return state;\n\n      \n\n    case BASKET_EDIT_ITEM:\n      var newstate = [];\n      var {product,quantity} = action.payload; \n      console.log(state);\n      state.map(function(item) {\n        if(item.product._id !== action.payload.product._id)\n          newstate.push(item);\n        else(newstate.push({product,quantity}));\n      });\n      \n      state=newstate;\n      return newstate;\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}