{"ast":null,"code":"import { BASKET_ADD, BASKET_REMOVE_ITEM, BASKET_EDIT_ITEM } from \"../actions/types\";\nexport default function (state = [], action) {\n  switch (action.type) {\n    case BASKET_ADD:\n      var {\n        product,\n        quantity\n      } = action.payload;\n      var exist = false;\n      var currentQuentity = 0;\n      state.forEach(e => {\n        if (e.product._id === product._id) {\n          currentQuentity = e.quantity;\n          exist = true;\n        }\n      });\n\n      if (exist) {\n        state = state.filter(function (e) {\n          return e.product._id !== product._id;\n        });\n        currentQuentity += quantity;\n        return [{\n          product,\n          quantity: currentQuentity\n        }, ...state];\n      } else {\n        return [{\n          product,\n          quantity\n        }, ...state];\n      }\n\n    case BASKET_REMOVE_ITEM:\n      state = state.filter(function (item) {\n        return item.product._id !== action.payload;\n      });\n      return state;\n\n    case BASKET_EDIT_ITEM:\n      var newstate = [];\n      var {\n        product,\n        quantity\n      } = action.payload;\n      console.log(state);\n      state.map(function (item) {\n        if (item.product._id !== action.payload.product._id) newstate.push(item);else newstate.push({\n          product,\n          quantity\n        });\n      });\n      state = newstate;\n      return newstate;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/kenstate/personal/CarDocs-2/client/src/reducers/basketReducer.js"],"names":["BASKET_ADD","BASKET_REMOVE_ITEM","BASKET_EDIT_ITEM","state","action","type","product","quantity","payload","exist","currentQuentity","forEach","e","_id","filter","item","newstate","console","log","map","push"],"mappings":"AAAA,SACEA,UADF,EAEEC,kBAFF,EAGEC,gBAHF,QAIO,kBAJP;AAMA,eAAe,UAASC,KAAK,GAAG,EAAjB,EAAqBC,MAArB,EAA6B;AAC1C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKL,UAAL;AACE,UAAI;AAACM,QAAAA,OAAD;AAASC,QAAAA;AAAT,UAAqBH,MAAM,CAACI,OAAhC;AACA,UAAIC,KAAK,GAAG,KAAZ;AACA,UAAIC,eAAe,GAAG,CAAtB;AAGAP,MAAAA,KAAK,CAACQ,OAAN,CAAcC,CAAC,IAAI;AACjB,YAAIA,CAAC,CAACN,OAAF,CAAUO,GAAV,KAAkBP,OAAO,CAACO,GAA9B,EAAmC;AACjCH,UAAAA,eAAe,GAAGE,CAAC,CAACL,QAApB;AACAE,UAAAA,KAAK,GAAG,IAAR;AACD;AACF,OALD;;AAMA,UAAIA,KAAJ,EAAW;AACTN,QAAAA,KAAK,GAAGA,KAAK,CAACW,MAAN,CAAa,UAASF,CAAT,EAAY;AAC/B,iBAAOA,CAAC,CAACN,OAAF,CAAUO,GAAV,KAAkBP,OAAO,CAACO,GAAjC;AACD,SAFO,CAAR;AAGAH,QAAAA,eAAe,IAAIH,QAAnB;AACA,eAAO,CAAC;AAAED,UAAAA,OAAF;AAAWC,UAAAA,QAAQ,EAAEG;AAArB,SAAD,EAAyC,GAAGP,KAA5C,CAAP;AACD,OAND,MAMO;AACL,eAAO,CAAC;AAAEG,UAAAA,OAAF;AAAWC,UAAAA;AAAX,SAAD,EAAwB,GAAGJ,KAA3B,CAAP;AACD;;AACH,SAAKF,kBAAL;AACEE,MAAAA,KAAK,GAAGA,KAAK,CAACW,MAAN,CAAa,UAASC,IAAT,EAAe;AAClC,eAAOA,IAAI,CAACT,OAAL,CAAaO,GAAb,KAAqBT,MAAM,CAACI,OAAnC;AACD,OAFO,CAAR;AAGA,aAAOL,KAAP;;AAIF,SAAKD,gBAAL;AACE,UAAIc,QAAQ,GAAG,EAAf;AACA,UAAI;AAACV,QAAAA,OAAD;AAASC,QAAAA;AAAT,UAAqBH,MAAM,CAACI,OAAhC;AACAS,MAAAA,OAAO,CAACC,GAAR,CAAYf,KAAZ;AACAA,MAAAA,KAAK,CAACgB,GAAN,CAAU,UAASJ,IAAT,EAAe;AACvB,YAAGA,IAAI,CAACT,OAAL,CAAaO,GAAb,KAAqBT,MAAM,CAACI,OAAP,CAAeF,OAAf,CAAuBO,GAA/C,EACEG,QAAQ,CAACI,IAAT,CAAcL,IAAd,EADF,KAEKC,QAAQ,CAACI,IAAT,CAAc;AAACd,UAAAA,OAAD;AAASC,UAAAA;AAAT,SAAd,CAAD;AACL,OAJD;AAMAJ,MAAAA,KAAK,GAACa,QAAN;AACA,aAAOA,QAAP;;AAEF;AACE,aAAOb,KAAP;AA5CJ;AA8CD","sourcesContent":["import {\n  BASKET_ADD,\n  BASKET_REMOVE_ITEM,\n  BASKET_EDIT_ITEM\n} from \"../actions/types\";\n\nexport default function(state = [], action) {\n  switch (action.type) {\n    case BASKET_ADD:\n      var {product,quantity} = action.payload;    \n      var exist = false;\n      var currentQuentity = 0;\n      \n\n      state.forEach(e => {\n        if (e.product._id === product._id) {\n          currentQuentity = e.quantity;\n          exist = true;\n        }\n      });\n      if (exist) {\n        state = state.filter(function(e) {\n          return e.product._id !== product._id;\n        });\n        currentQuentity += quantity;\n        return [{ product, quantity: currentQuentity }, ...state];\n      } else {\n        return [{ product, quantity }, ...state];\n      }\n    case BASKET_REMOVE_ITEM:\n      state = state.filter(function(item) {\n        return item.product._id !== action.payload;\n      });\n      return state;\n\n      \n\n    case BASKET_EDIT_ITEM:\n      var newstate = [];\n      var {product,quantity} = action.payload; \n      console.log(state);\n      state.map(function(item) {\n        if(item.product._id !== action.payload.product._id)\n          newstate.push(item);\n        else(newstate.push({product,quantity}));\n      });\n      \n      state=newstate;\n      return newstate;\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}